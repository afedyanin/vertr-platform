@page "/strategies"

@using Vertr.MarketData.Contracts

@inject IDialogService DialogService
@inject IToastService ToastService
@inject NavigationManager Navigation

<h3>Strategies</h3>

<FluentStack>
    <FluentButton @onclick="AddStrategyAsync" Appearance="Appearance.Accent">
        Add
    </FluentButton>
</FluentStack>

<div style="display: table; table-layout: fixed; width: 100%;">
    <div style="overflow-x: auto;">
        <FluentDataGrid @ref=dataGrid
            TGridItem=StrategyModel
            OnCellClick="HandleCellClick"
            Items="@_strategies"
            Virtualize=true
            ShowHover=true
            Style="width: 100%;"
            DisplayMode="DataGridDisplayMode.Table"
            RowSize="@DataGridRowSize.Medium">
                <PropertyColumn Property="@(p => p.Strategy.CreatedAt)" Sortable="true" />
                <PropertyColumn Property="@(p => p.Strategy.Type)" Sortable="true" />
                <PropertyColumn Property="@(p => p.Strategy.Name)" Sortable="true" />
                <PropertyColumn Property="@(p => p.Instrument.GetFullName())" Sortable="true" />
                <PropertyColumn Property="@(p => p.Strategy.QtyLots)" Sortable="true" />
                <PropertyColumn Property="@(p => p.Strategy.PortfolioId)" Sortable="true" />
                <PropertyColumn Property="@(p => p.Strategy.IsActive)" Sortable="true" />
        </FluentDataGrid>

    </div>
</div>
